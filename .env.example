# ===================================================================================
# WHATSAPP SUPPORT (GENFITY-WA-SUPPORT) - ENVIRONMENT CONFIGURATION
# ===================================================================================
#
# Gateway service yang handle subscription validation, rate limiting, dan
# proxy requests ke WhatsApp API (genfity-wa)
#
# USAGE:
#   cp .env.example .env
#   # Edit .env with your values
#   docker compose up -d --build
#
# IMPORTANT:
#   - All values MUST be set, no default values in docker-compose!
#   - NEVER commit .env to git!
#
# ===================================================================================

# ==================== ENVIRONMENT ====================
GIN_MODE=release
LOG_LEVEL=info

# ==================== IMAGE TAG (for Swarm only) ====================
IMAGE_TAG=latest

# ==================== PRIMARY DATABASE (PostgreSQL) ====================
# Database untuk webhook events, chat AI, dll
# Database is in containers/database/ (external via infra-network)
DB_HOST=infra-postgres
DB_PORT=5432
DB_USER=postgres
DB_PASSWORD=your_postgres_password_here
DB_NAME=wa_support
DB_SSLMODE=require

# ==================== TRANSACTIONAL DATABASE (PostgreSQL) ====================
# Database untuk subscription, user data, dll
# Using same database as primary for simplicity
TRANSACTIONAL_DB_HOST=infra-postgres
TRANSACTIONAL_DB_PORT=5432
TRANSACTIONAL_DB_USER=postgres
TRANSACTIONAL_DB_PASSWORD=your_postgres_password_here
TRANSACTIONAL_DB_NAME=genfity
TRANSACTIONAL_DB_SSLMODE=require

# ==================== APPLICATION ====================
PORT=8082
TZ=Asia/Jakarta

# ==================== GATEWAY CONFIGURATION ====================
# Gateway mode: enabled/disabled
GATEWAY_MODE=enabled

# Rate limiting
RATE_LIMIT_WINDOW=60
DEFAULT_RATE_LIMIT=100

# ==================== WHATSAPP API (Backend) ====================
# URL ke whatsapp-api service (via Docker network)
WA_SERVER_URL=http://wa-api:8080
WA_ADMIN_TOKEN=your_wa_admin_token_here

# ==================== AUTHENTICATION ====================
# Token untuk webhook verification
WEBHOOK_VERIFY_TOKEN=your_webhook_verify_token_here

# Admin token untuk API access
ADMIN_TOKEN=your_admin_token_here
